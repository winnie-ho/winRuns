<div id='view-activity'>
    <nav-bar v-bind:pageTitle='pageTitle'></nav-bar>

    <div id="activity-info" class="run-box__detail">
      <div id="activity-info__header" class="row sb">
        <router-link to="/activities" exact>
          <img src='../../assets/icon_arrow_left.png' class='icon'/>
        </router-link>
        <div class="heading truncate">{{ activity.name }}</div>
        <div class="date data-metric">{{ renderDate(activity.start_date) }}</div>
      </div>

      <div v-show="activity.type === 'Swim'" class="row sa">
        <div class="data-metric">{{ activity.description }}</div>
        <div class="data-metric">{{ renderTime(activity.moving_time) }}</div>
      </div>

      <div v-show="activity.type === 'Ride' || activity.type ==='Run'" class="row sa">
        <div class="data-metric">{{ renderDistance(activity.distance) }}</div>
        <div class="data-metric">{{ renderTime(activity.moving_time) }}</div>
        <div class="data-metric">{{ renderPace(activity.moving_time, activity.distance) }}</div>
      </div>
      
      <div class="row sa">
        <div class="row" v-on:click='openLaps =!openLaps'> 
          <img class="icon" src="../../assets/icon_laps.png"/>
          <div id="laps" class="data-metric">{{ lapsCount }}</div>
        </div>
        <div class="row">
          <img class="icon" src="../../assets/icon_heartrate.png"/>
          <div class="data-metric">{{ activity.average_heartrate }}</div>
        </div>

        <div class='row'>
          <img class="icon" src="../../assets/icon_cadence.png"/>
          <div class="data-metric">{{ activity.average_cadence }}</div>
        </div>
      </div>
      
      
      <div class="row sa">
        <div class="row" v-show='comments.length !== 0' v-on:click='openComments = !openComments'>
          <img class="icon" src="../../assets/icon_comment.png"/>
          <div class="data-metric">{{ comments.length }}</div>
        </div>

        <div class="row" v-show='kudos.length !== 0' v-on:click='openKudos = !openKudos'>
          <img class="icon" src="../../assets/icon_like.png"/>
          <div class="data-metric">{{ kudos.length }}</div>
        </div>
        
        <div class="row" v-show='photos.length !== 0' v-on:click='openPhotos = !openPhotos'> 
          <img class="icon" src="../../assets/icon_picture.png"/>
          <div class="data-metric">{{ photos.length }}</div>
        </div>
      </div>

      <div id="kudos-detail" v-show='openKudos'>
        <div class='col' v-for='kudo in kudos' v-bind:key='kudo.index'>
          <img v-bind:src='kudo.profile' class='avatar' />
          <h6>{{ kudo.firstname }}</h6>
        </div>
      </div>
      <div id="comments-detail" class="col sb " v-show='openComments'>
        <div class='row' v-for='comment in comments' v-bind:key='comment.index'>
          <img v-bind:src='comment.athlete.profile' class='avatar'/>
          <h5>{{ comment.text }}</h5>
        </div>
      </div>
      <div id="photos-detail" class="col sb" v-show='openPhotos'>
        <img class='photo' v-bind:src="photo.urls['1000']" v-for='photo in photos' v-bind:key='photo.index'/>
      </div>

      <div id="laps-detail" class="col sb">
        <div id='lap-calc-result' class='row sa' v-show='lapMarkers.length === 2'>
          <h2>{{ lapCountInCalc }}</h2>
          <h2 v-show="activity.type === 'Ride' || activity.type ==='Run'">{{ renderDistance(lapCalcDistanceResult) }}</h2>
          <h2>{{ renderTime(lapCalcTimeResult) }}</h2>
          <h2 v-show="activity.type === 'Ride' || activity.type ==='Run'">{{ renderPace(lapCalcTimeResult, lapCalcDistanceResult)}}</h2>
          <img src='../../assets/icon_cross.png' class='icon' v-on:click='clearLapMarkers()'/>
        </div>
        <div id="laps-list" class="col sb" v-show='openLaps' v-for='lap in laps' v-bind:key='lap.index'>
          <lap v-on:onMarkLapChange='setLapMarker($event)' v-bind:lap='lap' v-bind:activity='activity' v-bind:lapMarkers='lapMarkers' class="row sa lap"></lap>
        </div>
      </div>
    </div>

    <google-map 
      name='view-activity' 
      v-bind:lat='lat'
      v-bind:lng='lng'
      v-bind:polyline='polyline'>
    </google-map>

  </div>